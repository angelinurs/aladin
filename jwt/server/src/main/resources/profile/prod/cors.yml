# AWS ALB 프록시 헤더 처리
server:
  use-forward-headers: true
  forward-headers-strategy: framework  # ✅ 추가
  tomcat:
    remoteip:
      remote-ip-header: x-forwarded-for
      protocol-header: x-forwarded-proto
      protocol-header-https-value: https
      host-header: x-forwarded-host      # ✅ 추가
      port-header: x-forwarded-port      # ✅ 추가
      internal-proxies: 10\\..*|192\\.168\\..*|172\\.1[6-9]\\..*|172\\.2[0-9]\\..*|172\\.3[0-1]\\..*

cors:
  allowed-origins:
    # 회사 네트워크
    - "http://175.116.62.42"
    # ✅ HTTPS origin 추가 (ALB에서 보내는 실제 origin)
    - "https://medis.api.medicrm-ai.com"
    - "http://medis.api.medicrm-ai.com"
    - "https://landing.medicrm-ai.com"  # 직접 접근용
    - "http://landing.medicrm-ai.com"
    - "https://www.sc301.co.kr"
    - "https://*.medicrm-ai.com"
    - "http://*.medicrm-ai.com"
  allowed-methods:
    - "GET"
    - "POST"
    - "PUT"
    - "PATCH"
    - "DELETE"
    - "OPTIONS"
  allowed-headers:
    - "*"
  exposed-headers:
    - "access-type"
  allow-credentials: true

# 디버깅용 로그 설정
logging:
  level:
#    org.springframework.web.cors: DEBUG
#    org.springframework.security: DEBUG
    org.apache.catalina.valves.RemoteIpValve: DEBUG  # ✅ ALB 헤더 확인
    org.springframework.web.filter.ForwardedHeaderFilter: DEBUG